# 数据标注平台开发需求文档

## 项目背景

当前数据标注工作面临的挑战：
- 分散式平台体系导致标注人员需要在多个风格迥异的界面间切换
- 算法人员需要反复开发专属平台，影响效率
- 缺乏统一的任务执行与管理体系

## 项目目标

构建一个统一的数据标注平台，实现：
- 流程清晰、操作顺畅、管理统一
- 支持多种数据类型和标注形式
- 提供完整的任务生命周期管理

## 核心功能需求

### 阶段一：发起、配置标注任务 【60分】

#### 1.1 文件上传功能 【10分】
**功能描述：** 支持上传JSONL格式的数据文件
**技术要求：**
- 支持JSONL文件格式验证
- 文件大小限制和安全检查
- 上传进度显示
- 错误提示和处理

#### 1.2 字段配置功能 【20分】
**功能描述：** 配置数据文件中需要展示的字段，并根据数据类型正确渲染
**支持的数据类型：**
- **文本：** 普通文本显示
- **图片：** 图片文件路径读取和展示
- **代码块：** 代码高亮显示
- **PDF：** PDF文件读取和预览

**技术要求：**
- 动态字段配置界面
- 字段类型自动识别和手动指定
- 实时预览功能
- 支持文件路径解析和资源加载

#### 1.3 标注内容配置 【20分】
**功能描述：** 配置标注任务的标签和逻辑关系

##### 1.3.1 标注形式选择 【10分】
支持的标注形式：
- **单选：** 从预定义选项中选择一个
- **多选：** 从预定义选项中选择多个
- **打分：** 数值评分（支持分数范围设定）
- **文本输入：** 自由文本输入

##### 1.3.2 标签逻辑关系配置 【10分】
- 条件显示：基于前置标签的选择决定后续标签是否显示
- 依赖关系：某些标签的可选项依赖于其他标签的值
- 必填/选填设置
- 标签间的互斥关系

#### 1.4 任务分发功能 【10分】
**功能描述：** 将标注数据分配给标注人员
**技术要求：**
- 数据不重复分割
- 支持指定标注人员数量
- 平均分配算法
- 分配结果预览和调整

### 阶段二：标注与回收 【40分】

#### 2.1 标注实施功能 【20分】
**功能描述：** 标注人员进行数据标注操作
**核心功能：**
- 单条数据查看和标注
- 标注结果保存
- 标注回退和修改
- 标注进度自动保存

**界面要求：**
- 清晰的数据展示区域
- 直观的标注操作界面
- 快捷键支持
- 响应式设计

#### 2.2 进度管理功能 【10分】
**功能描述：** 标注进度跟踪和导航
**核心功能：**
- 当前标注进度显示（已完成/总数）
- 数据间快速跳转
- 标注状态标识（未开始/进行中/已完成）
- 搜索和过滤功能

#### 2.3 监督回收功能 【10分】
**功能描述：** 任务发起者监控和管理标注进度
**核心功能：**
- 实时查看所有标注者的进度
- 查看已完成的标注数据
- 标注质量检查
- 数据导出功能（支持多种格式）

## 具体数据类型需求

### 数据类型1：SQL语义一致性标注
**任务描述：** 判断查询question和SQL代码的语义一致性
**展示信息：**
- question文本
- SQL代码（代码高亮）
- SQL执行结果

**收集信息：**
- 语义一致性标签（True/False单选）

**数据文件：** annotation_data/SQL/sql_annotation_10.jsonl

### 数据类型2：MATH PDF标注
**任务描述：** 数学题的质量评估和修订
**展示信息：**
- 数学文本
- PDF来源文件

**收集信息：**
- 是否需要丢弃（单选）
- 问题答案一致性判断（单选）
- 修订文本（条件文本输入）

**数据文件：** annotation_data/math_pdf/math-pdf_example.jsonl

### 数据类型3：Deepresearch报告标注
**任务描述：** 对大模型judge的评分进行人工评估
**展示信息：**
- Markdown格式报告
- 逐点评分细则
- 模型的逐点评分及原因

**收集信息：**
- 人工评分（打分）
- Reasoning文本（条件文本输入，当评分差异较大时）

**相关文件：**
- 报告数据：annotation_data/DR/DR.jsonl
- 模型评分：xxx-model.json
- 报告内容：xxx.md
- 评分细则：xxx-rubrics.jsonl

## 技术架构建议

### 前端技术栈
- **框架：** React/Vue.js
- **UI组件库：** Ant Design/Element UI
- **状态管理：** Redux/Vuex
- **文件预览：** PDF.js, Monaco Editor（代码高亮）

### 后端技术栈
- **框架：** FastAPI/Django/Express.js
- **数据库：** PostgreSQL/MySQL + Redis（缓存）
- **文件存储：** 本地文件系统或对象存储
- **任务队列：** Celery/RQ

### 核心模块设计

#### 1. 用户管理模块
- 用户角色：任务发起者、标注人员、管理员
- 权限控制和访问管理

#### 2. 任务管理模块
- 任务创建、配置、分发
- 任务状态跟踪
- 数据分片算法

#### 3. 标注引擎模块
- 动态表单生成
- 多种数据类型渲染
- 标注逻辑处理

#### 4. 文件处理模块
- JSONL文件解析
- 多媒体文件预览
- 文件路径解析

#### 5. 数据导出模块
- 多格式导出支持
- 数据质量检查
- 统计报告生成


## 质量要求

### 功能性要求
- 所有核心功能正常运行
- 支持并发用户操作
- 数据一致性保证

### 性能要求
- 页面加载时间 < 3秒
- 大文件上传支持断点续传
- 支持1000+并发用户

### 安全要求
- 用户数据隔离
- 文件上传安全检查
- 操作日志记录

### 可用性要求
- 直观的用户界面
- 完善的错误提示
- 操作指导和帮助文档

## 验收标准

根据原需求的评分标准：
- **阶段一功能：** 60分
  - 文件上传：10分
  - 字段配置：20分
  - 标注配置：20分
  - 任务分发：10分

- **阶段二功能：** 40分
  - 标注实施：20分
  - 进度管理：10分
  - 监督回收：10分

**总分：100分**
